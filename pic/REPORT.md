D01-Linux

## Part 1. Установка ОС

*  Графический интерфейс должен отсутствовать.
*  Узнайте версию Ubuntu, выполнив команду: `cat /etc/issue.`
*  Вставьте скриншот с выводом команды.
![screen](part1.png)

## Part 2. Создание пользователя

*  Вставьте скриншот вызова команды для создания пользователя.
![screen](part2-1.png)
*  Новый пользователь должен быть в выводе команды: `cat /etc/passwd`
*  Вставьте скриншот с выводом команды.
![screen](part2-2.png)

## Part 3. Настройка сети ОС

*  Задать название машины вида user-1
![screen](part3-1.png)
*  Установить временную зону, соответствующую вашему текущему местоположению.
![screen](part3-2.png)
*  Вывести названия сетевых интерфейсов с помощью консольной команды.
![screen](part3-3.png)

*  В отчёте дать объяснение наличию интерфейса lo.

lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1. У него есть dns-имя – localhost. Посмотреть привязку можно в файле /etc/hosts.

*  Используя консольную команду получить ip адрес устройства, на котором вы работаете, от DHCP сервера. 
![screen](part3-4.png)

*  В отчёте дать расшифровку DHCP.

DHCP — Dynamic Host Configuration Protocol, протокол динамической конфигурации хоста. Это широковещательный протокол, позволяющий хосту получить настройки IP в автоматическом режиме без необходимости ручной настройки. В настройки входит IP-адрес, маска подсети, основной шлюз, DNS-серверы.

*  Определить и вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw). 
![screen](part3-5.png)
*  Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).
![screen](part3-6.png)
*  Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.  
![screen](part3-7.png)
* Успешно пропинговать удаленные хосты 1.1.1.1 и ya.ru и вставить в отчёт скрин с выводом команды.
![screen](part3-11.png)

## Part 4. Обновление ОС

*  После обновления системных пакетов, если ввести команду обновления повторно, должно появится сообщение, что обновления отсутствуют.
*  Вставить скриншот с этим сообщением в отчёт.
![screen](part4.png)

## Part 5. Использование команды sudo

*  В отчёте объяснить истинное назначение команды sudo (про то, что это слово - "волшебное", писать не стоит).

Команда sudo (substitute user and do, подменить пользователя и выполнить) позволяет строго определенным пользователям выполнять указанные программы с административными привилегиями без ввода пароля суперпользователя root.

*  Поменять hostname ОС от имени пользователя, созданного в пункте Part 2 (используя sudo).
![screen](part5-1.png)
*  Вставить скрин с изменённым hostname в отчёт.
![screen](part5-2.png)

## Part 6. Установка и настройка службы времени

*  Вывести время, часового пояса, в котором вы сейчас находитесь.
*  Вывод следующей команды должен содержать `NTPSynchronized=yes`: `timedatectl status`
*  Вставить скрины с корректным временем и выводом команды в отчёт.
![screen](part6.png)

## Part 7. Установка и использование текстовых редакторов 

	NANO

*  В отчёт вставьте скриншоты:

*  Из каждого редактора с содержимым файла перед закрытием.
![screen](part7-1.png)

*  Из каждого редактора с содержимым файла после редактирования.
![screen](part7-4.png)

*  Из каждого редактора с командами, введёнными для замены слова на другое.
![screen](part7-7.png)

- Для сохранения ctrl+s, для выхода ctrl+x.
- Для выхода ctrl+x и подтверждаем выход без сохранения.
- Для поиска слова и последующей замены ctrl+\ . Только поиск слова ctrl+w.

	VIM

*  В отчёт вставьте скриншоты:

*  Из каждого редактора с содержимым файла перед закрытием.
![screen](part7-2.png)

*  Из каждого редактора с содержимым файла после редактирования.
![screen](part7-5.png)

*  Из каждого редактора с командами, введёнными для замены слова на другое.
![screen](part7-8.png)

- Для сохранения и выхода :wq.
- Для выхода без сохранения :q!.
- Для поиска и замены :s/Искомое/Замена. Для поиска :s/Искомое/.

	MCEDIT

*  В отчёт вставьте скриншоты:

*  Из каждого редактора с содержимым файла перед закрытием.
![screen](part7-3.png)

*  Из каждого редактора с содержимым файла после редактирования.
![screen](part7-6.png)

*  Из каждого редактора с командами, введёнными для замены слова на другое.
![screen](part7-9.png)

- Для сохранения и выхода f2, f10.
- Для выхода без сохранения f10 и подтверждаем выход.
- Для поиска f7. Для поиска и замены f4.

## Part 8. Установка и базовая настройка сервиса **SSHD**
*  Установить службу sshd.
 
sudo apt-get install ssh
![screen](part8-1.png)

*  Добавить автостарт службы при загрузке системы.
![screen](part8-2.png)
*  Перенастроить службу SSHd на порт 2022.
![screen](part8-3.png)
*  Используя команду ps, показать наличие процесса sshd.
![screen](part8-4.png)

-С - выбирать процессы по имени команды.
*  Вывод команды netstat -tan должен содержать tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN
![screen](part8-5.png)
*  В отчёте объяснить значение ключей -tan, значение каждого столбца вывода, значение 0.0.0.0.

-a - Отображение всех подключений и ожидающих портов.

-t - Отображение текущего подключения в состоянии переноса нагрузки с процессора на сетевой адаптер при передаче данных ( "offload" ).

-n - Отображение адресов и номеров портов в числовом формате.

netstat -at - Перечислить все TCP порты 

proto - используемый сокетом протокол

Recv-Q – количество байтов, помещённых в буфер приёма TCP/IP, но не переданных приложению.

Send-Q – количество байтов, помещённых в буфер отправки TCP/IP, но не отправленных, или отправленных, но не подтверждённых.

Local address - локальный IP-адрес участвующий в соединении или связанный со службой, ожидающей входящие соединения (слушающей порт). 

Foreign address - Внешний IP-адрес, участвующий в создании соединения.

State - состояние соединения

Если в качестве адреса отображается 0.0.0.0 , то это означает - "любой адрес", т.е в соединении могут использоваться все IP-адреса существующие на данном компьютере.

## Part 9. Установка и использование утилит top, htop

*  По выводу команды top определить и написать в отчёте:

![screen](part9-2.png)

uptime: 31min

количество авторизованных пользователей: 1

общую загрузку системы: 0.00, 0.00, 0.00

общее количество процессов: 98

загрузку cpu: 1%

загрузку памяти: 148.9 + 352.1

pid процесса занимающего больше всего памяти: 664
![screen](part9-3.png)

pid процесса, занимающего больше всего процессорного времени: 1189
![screen](part9-1.png)

## Part 10. Использование утилиты **fdisk**

1.  название жесткого диска /dev/sda
2.  его размер 10GIB
3.  количество секторов 20971520
4.  размер swap 1.5 Gi
![fdisk -l](Part10(1).png)

## Part 11. Использование утилиты **df** 

1.  Запустить команду df.
2.  В отчёте написать для корневого раздела (/):
  - размер раздела: 8408452
  - размер занятого пространства: 4575284
  - размер свободного пространства: 3384452
  - процент использования: 58
  - Определить и написать в отчёт единицу измерения в выводе: Килобайт

3.  Запустить команду df -Th.
  - размер раздела : 8.1G
  - размер занятого пространства : 4.4G
  - размер свободного пространства : 3.3G
  - процент использования : 58
  - тип файловой системы для раздела : ext4  
![df](Part11(1).png)

## Part 12. Использование утилиты **du**

1.  `sudo apt-get install ncdu`
2.  Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)
![var](Part12(1).png)
3.  Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)
![human var/log/*](Part12(2).png)

## Part 13. Установка и использование утилиты **ncdu**

1.  `sudo apt-get install ncdu`
2.  ![ncdu /home](Part13(1).png)
3.  ![ncdu /var](Part13(2).png)
4.  ![ncdu /var/log](Part13(3).png)

## Part 14. Работа с системными журналами

1.  `vim /var/log/dmesg`
2.  `vim /var/log/syslog`
3.  `vim /var/log/authlog`
4.  Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему: 10:38:14 student by LOGIN
![vim logind](Part14(1).png)
5.  Перезапустить службу SSHd: `service ssh restart`
6.  Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).
![restart sshd](Part14(2).png)

## Part 15. Использование планировщика заданий **CRON**

1.  Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.
2.  Вывести на экран список текущих заданий для CRON.
![crontab -l](Part15(1).png)
3.  Вставить в отчёт скрины со строчками о выполнении и списком текущих задач.
![syslog cron ](Part15(2).png)
4.  Удалите все задания из планировщика заданий.
  - В отчёт вставьте скрин со списком текущих заданий для CRON.
![del](Part15(3).png)
